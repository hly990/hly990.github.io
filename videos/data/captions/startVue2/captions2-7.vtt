WEBVTT
Kind: captions
Language: en

00:00:00.040 --> 00:00:05.050
在页面使用表单。这一节我们学习怎样使用vue.js获取表单的输入

00:00:05.050 --> 00:00:09.370
怎样创建一个输入框，包括

00:00:09.370 --> 00:00:14.230
限制用户输入字数。

00:00:14.230 --> 00:00:19.630
类似于微博这样的网站的字数限制。

00:00:19.630 --> 00:00:23.310
我们输入一个字符串，你能看到输入框的右下角有输入提示

00:00:23.310 --> 00:00:28.290
包括输入总的限制字数

00:00:28.290 --> 00:00:34.890
不超过280个字符。也有我们输入字数的实时更新

00:00:34.890 --> 00:00:40.379
我们现在点击下面的发布按钮开始发布，刚才的输入不见了。

00:00:40.379 --> 00:00:44.910
我现在来修复这个问题。我们现在来看源代码

00:00:44.910 --> 00:00:52.379
我们有一个form元素，form元素绑定了v-on:submit指令，这个指令的值是publish。

00:00:52.379 --> 00:00:57.980
让我们看看这个publish函数。

00:00:58.040 --> 00:01:02.900
你需要注意publish函数有一个参数e，这是标准的提交事件对象。

00:01:02.900 --> 00:01:07.800
我们将要通过事件对象e去做一些操作。

00:01:07.800 --> 00:01:12.610
我们输入e.preventDefault()方法

00:01:12.610 --> 00:01:16.690
这个方法是取消默认的提交事件，即点击submit按钮，form不被提交。

00:01:16.690 --> 00:01:22.720
通常点击submit按钮，form表单就会获取一个提交请求，然后提交所有form元素。

00:01:22.720 --> 00:01:29.490
我们现在返回页面看看

00:01:30.909 --> 00:01:35.799
我在输入框中输入test，点publish，form没有被提交。test字符串还留在输入框中。

00:01:35.799 --> 00:01:41.380
我们返回到代码界面，看看当前的数据对象

00:01:41.380 --> 00:01:46.030
currentStatus对象的字符串有author,avatar,private,text。text默认为空

00:01:46.030 --> 00:01:52.430
 

00:01:52.430 --> 00:01:57.950
你能看到定义了最大长度限制，当前

00:01:57.950 --> 00:02:00.940
还没有做更新的显示

00:02:01.009 --> 00:02:06.250
现在，我们在publish方法中输入

00:02:06.250 --> 00:02:12.250
this.updates.push(currentStatus)

00:02:12.250 --> 00:02:18.270
接着，我们想要这个操作后清除掉text文本框中的内容

00:02:18.270 --> 00:02:22.170
因为一旦发布成功，

00:02:22.170 --> 00:02:25.160
可能我们不想上次输入的内容还留在文本框中

00:02:26.150 --> 00:02:32.480
所以我们给text属性赋一个空字符串

00:02:32.480 --> 00:02:39.170
我们输入text字符串，点击发布按钮，我们看到我的头像和名称

00:02:39.170 --> 00:02:46.380
显示出来了，文本框内容被清除。现在text内容没显示，因为在publish函数中text被置为空字符串了。

00:02:46.380 --> 00:02:50.370
我输入Text，text就实时显示了。

00:02:50.370 --> 00:02:54.480
我再输入一次后发布，又添加了一条信息。

00:02:54.480 --> 00:02:59.010
我再输入text,两个text都跟着一起变了。这是因为他们都引用的同一个数据对象。

00:02:59.010 --> 00:03:03.319
我们现在为每次发布一个新的数据对象

00:03:03.319 --> 00:03:06.879
 

00:03:07.250 --> 00:03:14.170
我们先创建一个空对象，接下来我们将要使用这个新对象

00:03:17.020 --> 00:03:22.690
我们使用Object.assign函数，把当前状态复制给新建的对象

00:03:22.690 --> 00:03:28.000
这样就不是引用当前状态了，你可以认为是两个不同的容器。

00:03:28.000 --> 00:03:32.560
 

00:03:32.560 --> 00:03:36.790
其实这个新的数据对象

00:03:36.790 --> 00:03:42.860
就是当前状态的克隆。我们push这个新对象

00:03:42.860 --> 00:03:48.830
把当前状态的text置为空字符串，我们在输入框输入hello,world

00:03:50.980 --> 00:03:55.599
现在数据对象完整显示出来了。我们在输入些内容，下面的text信息没有改变。

00:03:55.599 --> 00:03:59.020
好了，

00:03:59.020 --> 00:04:04.660
我们再来看看文本输入字数最大限制，

00:04:04.660 --> 00:04:07.200
我们现在来做一下

00:04:07.980 --> 00:04:13.709
你可以很容易显示当前输入的字数

00:04:13.709 --> 00:04:17.880
使用javascript的方法去获取文本长度，

00:04:17.880 --> 00:04:21.620
用双花括号插入到vue.js模版中。

00:04:21.620 --> 00:04:27.220
同样，我们在数据对象定义了最大文本长度属性maxLength

00:04:27.220 --> 00:04:32.009
我们定义的最大长度是280个字符

00:04:32.009 --> 00:04:38.580
每次更新的对象都会在历史记录里显示出来

00:04:38.580 --> 00:04:46.020
每个对象的属性通过数据绑定显示在页面

00:04:46.020 --> 00:04:52.080
v-bind:src绑定了图片路径，在页面显示图片，还有作者名称

00:04:52.080 --> 00:04:59.029
通过v-show控制private显示还是显示。

00:04:59.029 --> 00:05:04.639
我们钩上mark as private，输入内容后发布

00:05:06.380 --> 00:05:12.590
好了，我们有了一个私密提交，私密提交的字符串显示在这里。

00:05:12.590 --> 00:05:17.750
我们还想要最新提交的显示在顶部

00:05:17.750 --> 00:05:22.360
我们回到代码编辑器修改push

00:05:22.360 --> 00:05:28.640
我们使用unshift函数让最新提交显示在顶部

00:05:28.640 --> 00:05:31.030
 

00:05:31.169 --> 00:05:36.479
就像这个显示效果。我们还要看一下最大字数限制

00:05:36.479 --> 00:05:42.170
我拷贝输入的字符串

00:05:42.170 --> 00:05:46.090
重复粘贴拷贝的内容

00:05:48.080 --> 00:05:54.259
我们看到消息的长度变红

00:05:54.259 --> 00:05:59.300
告诉用户内容超过最大限制，这个时候发布按钮被禁用了。

00:05:59.300 --> 00:06:04.990
我们删除一些内容，现在红色提示消息了，可以点击发布按钮了

00:06:04.990 --> 00:06:09.210
 

00:06:09.210 --> 00:06:13.680
如果你字数超过了，按钮就又被禁用了。只有在最大字数范围内，

00:06:13.680 --> 00:06:18.910
才能够发布内容

00:06:18.910 --> 00:06:24.509
这里使用的是v-bind:disabled指令

00:06:24.509 --> 00:06:29.820
tooLong是一个计算列属性，

00:06:29.820 --> 00:06:32.669
如果当前字数超过最大限制就返回true

00:06:32.669 --> 00:06:39.030
 

00:06:39.030 --> 00:06:44.490
本节我们学习了使用TextArea元素去绑定用户输入

00:06:44.490 --> 00:06:50.310
以及怎样使用checkbox元素去记录状态

00:06:50.310 --> 00:06:56.250
怎样去验证文本长度

00:06:56.250 --> 00:07:00.990
怎样去禁用按钮去提交form等

00:07:00.990 --> 00:07:05.099
下一节我们学习怎么使用vue.js的开发工具

00:07:05.099 --> 00:07:09.590
 

